<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canvas Drawing</title>
</head>

<body>
    <h1>практическая работа №18(Js+canvas)</h1>
    <h1>Цымбалов и Жилина</h1>
    <h1>До нового года осталось: <span id="days-left"></span> дней</h1>
    <button onclick="scen1()">Один</button>
    <button onclick="scen2()">Два</button>
    <button onclick="scenAll()">Вместе</button><br>
    <canvas id="sceneCanvas1" width="400" height="400" style="border:1px solid black;"></canvas><br>
    <canvas id="sceneCanvas" width="800" height="400" style="border:1px solid black;"></canvas>

    <script>
        sceneCanvas1.style.display = "none"
        sceneCanvas.style.display = "none"

function scen1(){
     sceneCanvas1.style.display = ""
}
function scen2(){
     sceneCanvas.style.display = ""
}
function scenAll(){
     sceneCanvas1.style.display = ""
      sceneCanvas.style.display = ""
}

        // Функция для отображения оставшихся дней до Нового года
        function displayDaysLeft() {
            const now = new Date();
            const newYear = new Date(now.getFullYear() + 1, 0, 1);
            const daysLeft = Math.ceil((newYear - now) / (1000 * 60 * 60 * 24));
            document.getElementById("days-left").textContent = daysLeft;
        }
        displayDaysLeft();

        // Основной canvas (общая сцена)
        const canvas1 = document.getElementById("sceneCanvas");
        const ctx1 = canvas1.getContext("2d");

        let isLightOn = false; // Флаг для состояния окон (включены/выключены)

        // Рисуем снежный холм
        function drawSnow(ctx) {
            ctx.beginPath();
            ctx.moveTo(0, 250);
            ctx.quadraticCurveTo(400, 200, 800, 250);
            ctx.lineTo(800, 400);
            ctx.lineTo(0, 400);
            ctx.closePath();
            ctx.fillStyle = "#e0f7fa";
            ctx.fill();
            ctx.stroke();
        }

        // Рисуем слой ёлки
        function drawTreeLayer(ctx, x, y, width, height, curveHeight, color = "green") {
            ctx.beginPath();
            ctx.moveTo(x, y); // Верхняя точка
            ctx.lineTo(x - width / 2, y + height - curveHeight); // Левая сторона
            ctx.quadraticCurveTo(
                x, y + height + curveHeight, // Контрольная точка
                x + width / 2, y + height - curveHeight // Правая сторона
            );
            ctx.closePath();
            ctx.fillStyle = color;
            ctx.fill();
        }

        // Функция для рисования звезды
        function drawStar(ctx, cx, cy, spikes, outerRadius, innerRadius, color = "gold") {
            const step = Math.PI / spikes; // Угол между вершинами звезды
            ctx.beginPath();

            for (let i = 0; i < spikes * 2; i++) {
                // Чередуем внешний и внутренний радиус
                const radius = i % 2 === 0 ? outerRadius : innerRadius;
                const angle = step * i;

                const x = cx + Math.cos(angle) * radius;
                const y = cy - Math.sin(angle) * radius;
                ctx.lineTo(x, y);
            }

            ctx.closePath();
            ctx.fillStyle = color; // Цвет заливки
            ctx.fill();
            ctx.stroke(); // Обводка
        }

        // Рисуем ёлку
        function drawTree(ctx, x, y) {
            const layers = [
                { width: 80, height: 60, curveHeight: 10 },
                { width: 100, height: 60, curveHeight: 15 },
                { width: 120, height: 60, curveHeight: 20 }
            ];
            layers.forEach((layer, index) => {
                drawTreeLayer(ctx, x, y + index * 40, layer.width, layer.height, layer.curveHeight);
            });

            // Ствол
            ctx.fillStyle = "brown";
            ctx.fillRect(x - 10, y + 120, 20, 30);

            // Звезда на ёлке

        }

        // Рисуем шарики на ёлке
        function drawTreeDecorations(ctx, x, y) {
            const decorations = [
                { x: x - 25, y: y + 30 },
                { x: x + 25, y: y + 30 },
                { x: x - 35, y: y + 70 },
                { x: x + 35, y: y + 70 },
                { x: x + 40, y: y + 110 },
                { x: x - 40, y: y + 110 }
            ];
            const colors = ["red", "blue", "yellow", "purple"];
            decorations.forEach((decoration, index) => {
                ctx.beginPath();
                ctx.arc(decoration.x, decoration.y, 8, 0, Math.PI * 2);
                ctx.fillStyle = colors[index % colors.length];
                ctx.fill();
            });
        }

        // Рисуем дом
        function drawHouse(ctx, x, y) {
            // Основа дома
            ctx.fillStyle = "#8d6e63";
            ctx.fillRect(x, y, 100, 80);

            // Крыша
            ctx.beginPath();
            ctx.moveTo(x, y);
            ctx.lineTo(x + 50, y - 50);
            ctx.lineTo(x + 100, y);
            ctx.closePath();
            ctx.fillStyle = "#d32f2f";
            ctx.fill();
            ctx.stroke();

            // Окна
            const windowColor = isLightOn ? "#fff59d" : "#4d4d4d";
            ctx.fillStyle = windowColor;
            ctx.fillRect(x + 25, y + 20, 20, 20);
            ctx.fillRect(x + 55, y + 20, 20, 20);
            ctx.fillRect(x + 25, y + 50, 20, 20);
            ctx.fillRect(x + 55, y + 50, 20, 20);
            // Труба
            ctx.fillStyle = "gray";
            ctx.fillRect(x + 70, y - 40, 15, 30);
        }

        // Рисуем снеговика
        function drawSnowman(ctx, x, y) {
            const circles = [
                { x: x, y: y, radius: 30 },
                { x: x, y: y - 40, radius: 25 },
                { x: x, y: y - 70, radius: 20 }
            ];
            circles.forEach((circle) => {
                ctx.beginPath();
                ctx.arc(circle.x, circle.y, circle.radius, 0, Math.PI * 2);
                ctx.fillStyle = "white";
                ctx.fill();
                ctx.stroke();
            });

            // Глаза
            ctx.beginPath();
            ctx.arc(x - 5, y - 75, 3, 0, Math.PI * 2);
            ctx.arc(x + 5, y - 75, 3, 0, Math.PI * 2);
            ctx.fillStyle = "black";
            ctx.fill();

            // Нос
            ctx.beginPath();
            ctx.moveTo(x, y - 70);
            ctx.lineTo(x + 15, y - 68);
            ctx.lineTo(x, y - 65);
            ctx.closePath();
            ctx.fillStyle = "orange";
            ctx.fill();

            // Ведро
            ctx.fillStyle = "gray";
            ctx.fillRect(x - 12, y - 100, 25, 15);
            ctx.beginPath();
            ctx.moveTo(x - 12, y - 100);
            ctx.lineTo(x + 12, y - 100);
            ctx.lineTo(x, y - 110);
            ctx.closePath();
            ctx.fill();
        }

        // Основная сцена
        function renderScene() {
            ctx1.clearRect(0, 0, canvas1.width, canvas1.height);
            drawSnow(ctx1);
            drawTree(ctx1, 200, 100);
            drawTreeDecorations(ctx1, 200, 100);
            drawHouse(ctx1, 350, 150);
            drawSnowman(ctx1, 650, 250);
            drawStar(ctx1, 200, 90, 5, 10, 20);
        }

        // Анимация включения/выключения света в окнах
        setInterval(() => {
            isLightOn = !isLightOn;
            renderScene();
        }, 3000);

        // Инициализация
        renderScene();

        // Canvas 2: Динамическая ёлка
        const canvas2 = document.getElementById("sceneCanvas1");
        const ctx2 = canvas2.getContext("2d");

        const treeHeight = 300;
        const treeWidth = 300;

        // Рисуем шары с изменением цвета
        function drawDecorations(ctx, x, y) {
            const decorations = [
                { x: x - 25, y: y + 30 },
                { x: x + 25, y: y + 30 },
                { x: x - 35, y: y + 70 },
                { x: x + 35, y: y + 70 },
                { x: x + 40, y: y + 110 },
                { x: x - 40, y: y + 110 }
            ];
            const colors = ["red", "blue", "yellow", "purple"];
            decorations.forEach((decoration, index) => {
                ctx.beginPath();
                ctx.arc(decoration.x, decoration.y, 8, 0, Math.PI * 2);
                ctx.fillStyle = colors[(index + Math.floor(Date.now() / 500)) % colors.length];
                ctx.fill();
            });
        }

        function renderDynamicTree() {
            ctx2.clearRect(0, 0, canvas2.width, canvas2.height);
            const centerX = canvas2.width / 2;
            drawTree(ctx2, centerX, 50);
            drawDecorations(ctx2, centerX, 50);
            requestAnimationFrame(renderDynamicTree);
            drawStar(ctx2, 200, 40, 5, 10, 20);
        }

        renderDynamicTree();
    </script>
</body>

</html>